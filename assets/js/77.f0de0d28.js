(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{427:function(a,e,n){"use strict";n.r(e);var s=n(25),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),n("blockquote",[n("p",[a._v("包管理工具，有maven内味了，模块之间的包可以相互依赖")])]),a._v(" "),n("p",[n("a",{attrs:{href:"https://lernajs.bootcss.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官网文档"),n("OutboundLink")],1),n("br"),a._v(" "),n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/33858131",target:"_blank",rel:"noopener noreferrer"}},[a._v("知乎参考文档"),n("OutboundLink")],1),n("br"),a._v(" "),n("a",{attrs:{href:"http://www.ayqy.net/blog/lerna%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/",target:"_blank",rel:"noopener noreferrer"}},[a._v("lerna入门指南"),n("OutboundLink")],1),n("br"),a._v(" "),n("a",{attrs:{href:"https://www.jianshu.com/p/8b7e6025354b",target:"_blank",rel:"noopener noreferrer"}},[a._v("简书参考"),n("OutboundLink")],1),n("br"),a._v(" "),n("a",{attrs:{href:"http://www.sosout.com/2018/07/21/lerna-repo.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("lerna最佳实战"),n("OutboundLink")],1),n("br"),a._v("\n##安装")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("npm i -g lerna 或 yarn global add lerna\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("lerna安装完成之后，就需要使用lerna 初始化项目，使用(在使用该命令前，应该已经使用git init初始化过该项目)：")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("lerna init  \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("生成lerna.json文件，目录结构如下：")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('{\n  "version": "1.1.3",\n  "npmClient": "npm",\n  "command": {\n    "publish": {\n      "ignoreChanges": [\n        "ignored-file",\n        "*.md"\n      ]\n    },\n    "bootstrap": {\n      "ignore": "component-*",\n      "npmClientArgs": ["--no-package-lock"]      \n    }\n  },\n  "packages": ["packages/*"]\n}\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br")])]),n("ul",[n("li",[a._v("version , 当前库的版本")]),a._v(" "),n("li",[a._v("npmClient , 允许指定命令使用的client， 默认是 npm， 可以设置成 yarn")]),a._v(" "),n("li",[a._v("command.publish.ignoreChanges ， 可以指定那些目录或者文件的变更不会被publish")]),a._v(" "),n("li",[a._v("command.bootstrap.ignore ， 指定不受 bootstrap 命令影响的包")]),a._v(" "),n("li",[a._v("command.bootstrap.npmClientArgs ， 指定默认传给 lerna bootstrap 命令的参数")]),a._v(" "),n("li",[a._v("command.bootstrap.scope ， 指定那些包会受 lerna bootstrap 命令影响")]),a._v(" "),n("li",[a._v("packages ， 指定包所在的目录")])]),a._v(" "),n("p",[a._v("该命令用于为packages文件夹下的package安装依赖。该命令有许多的用法，通常说来有如下几种，还是以前面的文件夹为例，其目录结构如下：")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("multi-packages/\n  package.json\n  packages/\n    package-1/\n      package.json\n    package-2/\n      package.json\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("h2",{attrs:{id:"lerna-add-命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lerna-add-命令"}},[a._v("#")]),a._v(" lerna add 命令")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("lerna add <package>[@version] [--dev]\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("ol",[n("li",[a._v("lerna add babel , 该命令会在package-1和package-2下安装babel")]),a._v(" "),n("li",[a._v("lerna add react --scope=package-1 ,该命令会在package-1下安装react")]),a._v(" "),n("li",[a._v("lerna add package-2 --scope=package-1，该命令会在package-1下安装package-2")])]),a._v(" "),n("h2",{attrs:{id:"lerna-publish"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lerna-publish"}},[a._v("#")]),a._v(" lerna publish")]),a._v(" "),n("ul",[n("li",[a._v("第一次注册npm 在邮箱先验证npm,不然使用不了")]),a._v(" "),n("li",[a._v("第一次提交 lerna publish from-package "),n("a",{attrs:{href:"https://github.com/lerna/lerna/tree/master/commands/publish#readme",target:"_blank",rel:"noopener noreferrer"}},[a._v("坑"),n("OutboundLink")],1)]),a._v(" "),n("li",[a._v('先git commit -m "fix" 提交')]),a._v(" "),n("li",[a._v("删除package.json的private:true，")]),a._v(" "),n("li",[a._v('name字段@xxx/xxx需要付费,添加"publishConfig": {"access": "public"}')])])])}),[],!1,null,null,null);e.default=r.exports}}]);